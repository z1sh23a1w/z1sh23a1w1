<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALSTAR Points Tracker</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Outfit', sans-serif; 
            color: #1f2937; 
            background-color: #ffffff;
        }

        .primary-maroon { color: #88113b; }
        .bg-maroon { background-color: #88113b; }
        .bg-dark-blue { background-color: #0b1a42; }
        .text-main { color: #1f2937; }
        
        .btn-modern {
            padding: 12px 32px;
            border-radius: 9999px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-maroon {
            background-color: #88113b;
            color: white;
        }

        .btn-maroon:hover {
            background-color: #6d0d2f;
        }

        .btn-outline {
            border: 2px solid #88113b;
            color: #88113b;
            background: transparent;
        }

        .btn-outline:hover {
            background-color: #88113b;
            color: white;
        }

        .border-custom { border: 2px solid #d1d5db; }
        .border-b-custom { border-bottom: 2px solid #d1d5db; }
        .border-t-custom { border-top: 2px solid #d1d5db; }

        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #ffffff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: none;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="antialiased">

    <nav class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b-custom">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center gap-3">
                    <div class="bg-dark-blue px-3 py-[11px] rounded-lg flex items-center">
                        <span class="text-xl font-bold tracking-tighter text-white leading-none">ALSTAR</span>
                    </div>
                </div>

                <div>
                    <a href="/" class="btn-modern btn-outline text-sm py-2 px-5">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                        </svg>
                        Back To Home
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <section class="py-12 border-b-custom">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex flex-col items-center text-center">
                    <span class="primary-maroon font-bold tracking-[0.2em] uppercase text-xs mb-4">ALSTAR</span>
                    <h1 class="text-4xl md:text-4xl font-black text-main tracking-tight uppercase">Points Tracker</h1>
                    <div class="flex items-center gap-4 mt-6">
                        <div class="w-12 h-[2px] bg-gray-300"></div>
                        <div class="w-2 h-2 rounded-full bg-maroon"></div>
                        <div class="w-12 h-[2px] bg-gray-300"></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="max-w-4xl mx-auto px-6 lg:px-8 py-12">
            <div class="border-custom bg-white rounded-3xl overflow-hidden">
                <div class="p-8 border-b-custom">
                    <label for="student-id" class="block text-xs font-bold uppercase tracking-widest mb-4">Student ID</label>
                    <input type="text" id="student-id" placeholder="e.g. 25000000" class="w-full px-6 py-4 bg-gray-50 border-2 border-gray-200 rounded-2xl focus:border-maroon focus:outline-none transition-colors mb-4">
                    <button onclick="checkPoints()" id="btn-text" class="btn-modern btn-maroon w-full py-4 text-sm font-bold tracking-widest gap-3">
                        <span>View Points</span>
                        <div id="loader" class="loader"></div>
                    </button>
                </div>

                <div id="results-card" class="p-8 grid grid-cols-1 md:grid-cols-3 gap-y-10 gap-x-8">
                    <div>
                        <p class="text-xs uppercase tracking-widest mb-1 text-gray-500 font-semibold">Student Name</p>
                        <h2 class="text-xl font-bold" id="res-name">---</h2>
                    </div>
                    <div>
                        <p class="text-xs uppercase tracking-widest mb-1 text-gray-500 font-semibold">Student ID</p>
                        <h2 class="text-xl font-bold" id="res-id">---</h2>
                    </div>
                    <div>
                        <p class="text-xs uppercase tracking-widest mb-1 text-gray-500 font-semibold">Certificate Status</p>
                        <h2 class="text-xl font-bold" id="res-eligibility">---</h2>
                    </div>

                    <div>
                        <p class="text-xs uppercase tracking-widest mb-1 text-gray-500 font-semibold">Participation Points</p>
                        <p class="text-2xl font-black primary-maroon"><span id="res-participation">0</span>/5</p>
                    </div>
                    <div>
                        <p class="text-xs uppercase tracking-widest mb-1 text-gray-500 font-semibold">Volunteer Points</p>
                        <p class="text-2xl font-black primary-maroon"><span id="res-volunteer">0</span>/6</p>
                    </div>
                    <div>
                        <p class="text-xs uppercase tracking-widest mb-1 text-gray-500 font-semibold">Talk or Workshop Points</p>
                        <p class="text-2xl font-black primary-maroon"><span id="res-workshop">0</span>/5</p>
                    </div>
                </div>
            </div>

            <p id="error-msg" class="hidden text-center mt-6 text-red-600 text-xs font-bold uppercase tracking-widest"></p>
        </section>
    </main>

    <footer class="py-8 bg-[#ffffff] border-t-custom text-center">
        <p class="text-md">Â© 2026 ALSCO. All rights reserved.</p>
    </footer>

    <script>
        async function checkPoints() {
            const idInput = document.getElementById('student-id').value;
            const loader = document.getElementById('loader');
            const errorMsg = document.getElementById('error-msg');

            if (!idInput) return alert("Please enter a Student ID");

            loader.style.display = "block";
            errorMsg.classList.add('hidden');

            try {
                const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwwvhQRJ_syNmUCVBTraJH-qQQCJ9Pn8mjlmXpRWbTarqeM4JOA-3S9oaCrEFk7wVIbCA/exec";
                
                const response = await fetch(`${WEB_APP_URL}?id=${idInput}`);
                const data = await response.json();

                if (data.status === "success") {
                    document.getElementById('res-name').innerText = data.name;
                    document.getElementById('res-id').innerText = data.id;
                    document.getElementById('res-participation').innerText = data.participation;
                    document.getElementById('res-volunteer').innerText = data.volunteer;
                    document.getElementById('res-workshop').innerText = data.workshop;

                    const isEligible = data.participation >= 5 && data.volunteer >= 6 && data.workshop >= 5;
                    const elElem = document.getElementById('res-eligibility');
                    
                    if (isEligible) {
                        elElem.innerText = "Eligible";
                        elElem.className = "text-xl font-bold text-green-600";
                    } else {
                        elElem.innerText = "Not Eligible";
                        elElem.className = "text-xl font-bold text-red-600";
                    } 

                } else {
                    errorMsg.innerText = "Student ID not found. Please try again.";
                    errorMsg.classList.remove('hidden');
                }
            } catch (error) {
                console.error(error);
                errorMsg.innerText = "Error connecting to the tracker.";
                errorMsg.classList.remove('hidden');
            } finally {
                loader.style.display = "none";
            }
        }
    </script>
</body>
</html>